<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Note's</title>
    <style>
        body {
            background-color: #1e1e2f;
            color: #ffffff;
            font-family: "Courier New", Courier, monospace;
            max-width: 600px;
            margin: 0 auto;
            padding: 0px 15px;
        }

        h2, h3 {
            text-align: center;
            margin-bottom: 20px;
        }

        input, button {
            font-family: "Courier New", Courier, monospace;
            font-size: 16px;
            width: 100%;
            padding: 12px;
            margin: 8px 0;
            box-sizing: border-box;
            border: none;
            border-radius: 5px;
        }

        input {
            background-color: #2a2a40;
            color: #fff;
            border: 1px solid #444;
        }

        button {
            background-color: #03a9f4;
            color: white;
            transition: background 0.3s ease;
        }

        button:hover {
            background-color: #0288d1;
        }

        #guncelleBtn {
            background-color: #8bc34a;
        }

        #guncelleBtn:hover {
            background-color: #689f38;
        }

        #kayitListesi {
            margin-top: 30px;
            border-top: 1px solid #555;
            padding-top: 15px;
        } 
		#kayitListesi  button{
            margin-top: 10px;
            border-top: 1px solid #555;
        
		
        }

        ul {
            list-style: none;
            padding-left: 0;
        }

.listeSatiri {
    background-color: #2a2a40;
    border: 1px solid #444;
    border-radius: 6px;
    padding: 10px;
    margin-bottom: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.listeSatiri span {
    flex-grow: 1;
    word-break: break-word;
}

.listeSatiri .butonGrubu {
flex-direction: column;
    display: flex;
    gap: 6px;
}

.listeSatiri button {
    font-size: 13px;
    padding: 6px 10px;
    border-radius: 4px;
    border: none;
    width: 80px;
    cursor: pointer;
}

.listeSatiri .duzenleBtn {
    background-color: #f57c00;
    color: white;
}

.listeSatiri .duzenleBtn:hover {
    background-color: #ef6c00;
}

.listeSatiri .silBtn {
    background-color: #e53935;
    color: white;
}

.listeSatiri .silBtn:hover {
    background-color: #c62828;
}

.logoutBtn {
    background-color: #3498db;
    color: #fff;
    border: none;
    padding: 10px 20px;
  
    border-radius: 6px;
    font-size: 16px;
    cursor: pointer;
    transition: background 0.3s ease, transform 0.2s ease, box-shadow 0.2s ease;
    float: right;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
}

.logoutBtn:hover {
    background-color: #7b1fa2;
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
}





    #notPopup {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #ffffff;
      color: #000;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.4);
      z-index: 999;
      width: 90%;
      max-width: 500px;
    }

    #notMetni {
      width: 90%;
      height: 200px;
      padding: 12px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 14px;
      resize: vertical;
    }

    .popup-buttons {
      margin-top: 10px;
      display: flex;
      justify-content: space-between;
    }

    .popup-buttons button {
      padding: 10px 20px;
      font-size: 14px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    .saveBtn {
      background-color: #27ae60;
      color: white;
    }

    .cancelBtn {
      background-color: #e74c3c;
      color: white;
    }

    body.popup-acik::before {
      content: "";
      position: fixed;
      top: 0; left: 0; bottom: 0; right: 0;
      background-color: rgba(0, 0, 0, 0.4);
      z-index: 998;
    }

.uc-lu {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
}

.aramaKutusu {
  position: relative;
  flex: 1 1 80%;
}
#kelimeBul {
  flex: 1 1 80%;
  padding: 8px;
  font-size: 16px;
}
.temizleBtn {
  position: absolute;
  right: 8px;
  top: 50%;
  transform: translateY(-50%);
  cursor: pointer;
  font-size: 14px;
  color: #999;
  display: none;
}
#notEkleBtn {
  flex: 0 0 10%;
  padding: 8px;
  font-size: 16px;
  cursor: pointer;
}

.logoutBtn {
  flex: 0 0 10%;
  padding: 8px;
  font-size: 16px;
  cursor: pointer;
}
#notEkleBtn:hover {
    background-color: #7b1fa2;
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
}

#notBaslik {
    position: absolute;
    top: -10px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 24px;
    font-weight: bold;
}

.temizleBtn  {
  position: absolute;
  right: 8px;
  top: 50%;
  transform: translateY(-50%);
  cursor: pointer;
  font-size: 14px;
  color: #999;
  display: none; /* Ba≈ülangƒ±√ßta gizli */
}


    </style>
</head>
<body>

 <!-- Giri≈ü Yapma Ekranƒ± -->
<div id="loginSection">
    <h2>Giri≈ü Yap</h2>
    <input type="email" id="emailInput" placeholder="Email">
    <input type="password" id="passwordInput" placeholder="≈ûifre">
    <button onclick="login()">Giri≈ü Yap</button>
    <p>Hesabƒ±nƒ±z yok mu? <a href="javascript:void(0);" onclick="showSignup()">Kayƒ±t ol</a></p>
</div>

<!-- Kayƒ±t Olma Ekranƒ± -->
<div id="signupSection" style="display:none;">
    <h2>Kayƒ±t Ol</h2>
    <input type="email" id="signupEmail" placeholder="Email">
    <input type="password" id="signupPassword" placeholder="≈ûifre">
    <button onclick="signup()">Kayƒ±t Ol</button>
    <p>Hesabƒ±nƒ±z var mƒ±? <a href="javascript:void(0);" onclick="showLogin()">Giri≈ü yap</a></p>
    <p id="signupMessage" style="color: #8bc34a; display: none;">Kayƒ±t olu≈üturuldu, giri≈ü yapƒ±n.</p>
</div>






  <!-- ƒ∞√ßerik B√∂l√ºm√º -->
  
<div id="kayitListesi" style="display:none;">

<h5 id="notBaslik"> Note's </h5>


<div class="uc-lu">
    <button class="logoutBtn" onclick="logout()">üîì</button>
   <div class="aramaKutusu">
    <input type="text" id="kelimeBul" placeholder="Ara">
   <span class="temizleBtn" onclick="temizleInput()">‚ùå</span>
</div>
  <button id="notEkleBtn">üìù</button>
</div>


  <!-- Not Popup Kutusu -->
  <div id="notPopup">
    <h3 style="margin-top: 0;">Notlarƒ±m</h3>
    <textarea id="notMetni" placeholder="Notlarƒ±nƒ±zƒ± buraya yazƒ±n..."></textarea>
    <div  class="popup-buttons">
      <button  class="saveBtn" onclick="notKaydet()">Kaydet</button>
      <button class="cancelBtn" onclick="popupKapat()">ƒ∞ptal</button>
    </div>
  </div>




<div style="text-align:center; margin: 24px 0; color: #aaa;">‚úß ‚ú¶ ‚úß</div>



    <!-- 3 adet input alanƒ± -->
	<div class="content-inbtn" >
    <input  type="text" id="isimInput" placeholder="Bilgi Giriniz...">
    <input  type="text" id="soyadInput" placeholder="Bilgi Giriniz...">
    <input  type="text" id="telefonInput" placeholder="Bilgi Giriniz...">

    <button  id="kaydetBtn" onclick="isimKaydet()">‚ûï Kaydet</button>
    <button  id="guncelleBtn" onclick="isimGuncelle()" style="display:none;">‚úî G√ºncelle</button>
    <button  id="vazgecBtn" style="display: none;">‚úñ Vazge√ß</button>
</div>

    <h3>	‚úçÔ∏è Size Ait Notlar</h3>
    <ul id="isimlerListesi"></ul>
</div>



	

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

   <script>
   
   
   
    // Firebase konfig√ºrasyonu
        const firebaseConfig = {
            apiKey: "AIzaSyBWj53RpZd_xcWGD-ZLIyXBYz8H9MehM7Y",
            authDomain: "dosya01-7a585.firebaseapp.com",
            databaseURL: "https://dosya01-7a585-default-rtdb.firebaseio.com",
            projectId: "dosya01-7a585",
            storageBucket: "dosya01-7a585.firebasestorage.app",
            messagingSenderId: "502419176600",
            appId: "1:502419176600:web:d4304f2a0bfc30d03ce4ed"
        };
        firebase.initializeApp(firebaseConfig);

        let currentEditKey = null;

        // Kayƒ±t Olma Fonksiyonu
        function signup() {
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;

            firebase.auth().createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    const user = userCredential.user;
                    console.log("Kayƒ±t ba≈üarƒ±lƒ±: ", user.uid);
                    document.getElementById('signupMessage').style.display = "block"; // Kayƒ±t sonrasƒ± mesajƒ± g√∂ster
                    setTimeout(() => {
                        showLogin(); // Kayƒ±t olduktan sonra giri≈ü ekranƒ±nƒ± g√∂ster
                    }, 2000); // 2 saniye sonra giri≈ü ekranƒ±na ge√ßi≈ü
                })
                .catch((error) => {
                    const errorCode = error.code;
                    const errorMessage = error.message;
                    alert("Hata: " + errorMessage);
                });
        }

        // Giri≈ü Yapma Fonksiyonu
        function login() {
            const email = document.getElementById('emailInput').value;
            const password = document.getElementById('passwordInput').value;

            firebase.auth().signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    const user = userCredential.user;
                    console.log("Giri≈ü ba≈üarƒ±lƒ±: ", user.uid);
                    showContent(user.uid); // ƒ∞√ßeriƒüi g√∂ster
                    document.getElementById('loginSection').style.display = "none"; // Giri≈ü ekranƒ±nƒ± gizle
                    document.getElementById('signupSection').style.display = "none"; // Kayƒ±t ekranƒ±nƒ± gizle
                })
                .catch((error) => {
                    const errorCode = error.code;
                    const errorMessage = error.message;
                    alert("Hata: " + errorMessage);
                });
        }

	
	

    // Kayƒ±t Olma Fonksiyonu
    function isimKaydet() {
        const user = firebase.auth().currentUser;
        if (!user) {
           
			Swal.fire({
            text: 'L√ºtfen √∂nce giri≈ü yapƒ±n!',
            confirmButtonText: 'Tamam'
        });
            return;
        }

        const ad = document.getElementById('isimInput').value.trim();
        const soyad = document.getElementById('soyadInput').value.trim();
        const telefon = document.getElementById('telefonInput').value.trim();

  
    if (ad === "" && soyad === "" && telefon === "") {
        Swal.fire({
            text: 'L√ºtfen en az bir alanƒ± doldurun!',
            confirmButtonText: 'Tamam'
        });
        return;
    }

        // Kullanƒ±cƒ± UID'sine g√∂re veri kaydetme
        firebase.database().ref('kayitlar/' + user.uid).push({
            ad: ad,
            soyad: soyad,
            telefon: telefon,
            tarih: new Date().toISOString()
        }).then(() => {
            document.getElementById('isimInput').value = "";
            document.getElementById('soyadInput').value = "";
            document.getElementById('telefonInput').value = "";
        });
    }

    // Kullanƒ±cƒ±nƒ±n kendi verilerini g√∂r√ºnt√ºleme
    function showContent(uid) {
        firebase.database().ref('kayitlar/' + uid).on('value', (snapshot) => {
            const isimler = snapshot.val();
            if (isimler) {
                const isimlerListesi = document.getElementById('isimlerListesi');
                isimlerListesi.innerHTML = ""; // Eski listeyi temizle

                for (const key in isimler) {
                    const li = document.createElement('li');
                    li.classList.add('listeSatiri');
                   li.innerHTML = `
    <div>
        <span> ${isimler[key].ad}</span><br>
        <span> ${isimler[key].soyad}</span><br>
        <span> ${isimler[key].telefon}</span>
    </div>
    <div class="butonGrubu">
        <button class="duzenleBtn" onclick="guncelle('${key}', '${isimler[key].ad}', '${isimler[key].soyad}', '${isimler[key].telefon}')">D√ºzenle</button>
        <button class="silBtn" onclick="sil('${key}')">Sil</button>
    </div>
`;

                    isimlerListesi.appendChild(li);
					
                }
            }
        });

        document.getElementById('kayitListesi').style.display = "block";
		 // üîΩ Bu satƒ±r eklendi: giri≈ü yapƒ±lƒ±nca arama kutusu odaklansƒ±n
    document.getElementById("kelimeBul").focus();
    }

    // Veriyi silme
  function sil(key) {
    const user = firebase.auth().currentUser;

    Swal.fire({
        title: 'Emin misiniz?',
        text: "Bu kaydƒ± silmek √ºzeresiniz!",
      
        showCancelButton: true,
        confirmButtonColor: '#d33',
        cancelButtonColor: '#3085d6',
        confirmButtonText: 'Evet, sil!',
        cancelButtonText: 'ƒ∞ptal'
    }).then((result) => {
        if (result.isConfirmed) {
            firebase.database().ref('kayitlar/' + user.uid + '/' + key).remove()
                .then(() => {
                    Swal.fire(
                        'Silindi!',
                        'Kayƒ±t ba≈üarƒ±yla silindi.',
                        'success'
                    );
                })
                .catch((error) => {
                    Swal.fire(
                        'Hata!',
                        'Kayƒ±t silinirken bir sorun olu≈ütu.',
                        'error'
                    );
                    console.error(error);
                });
        }
    });
}


    // Veriyi g√ºncelleme
    function guncelle(key, ad, soyad, telefon) {
        currentEditKey = key;
        document.getElementById('isimInput').value = ad;
        document.getElementById('soyadInput').value = soyad;
        document.getElementById('telefonInput').value = telefon;
        document.getElementById('guncelleBtn').style.display = "block";
		 document.getElementById('vazgecBtn').style.display = "inline-block";
		document.getElementById('kaydetBtn').style.display = "none"; // KAYDET butonunu gizle
        document.getElementById('guncelleBtn').onclick = () => {
            isimGuncelle(key);
        };
		
    }

    // Veriyi g√ºncelleme
    function isimGuncelle(key) {
        const user = firebase.auth().currentUser;
        const yeniAd = document.getElementById('isimInput').value.trim();
        const yeniSoyad = document.getElementById('soyadInput').value.trim();
        const yeniTelefon = document.getElementById('telefonInput').value.trim();

       if (yeniAd === "" && yeniSoyad === "" && yeniTelefon === "") {
        Swal.fire({
            text: 'L√ºtfen en az bir alanƒ± doldurun!',
            confirmButtonText: 'Tamam'
        });
        return;
    }

        firebase.database().ref('kayitlar/' + user.uid + '/' + key).update({
            ad: yeniAd,
            soyad: yeniSoyad,
            telefon: yeniTelefon
        }).then(() => {
            document.getElementById('guncelleBtn').style.display = "none";
			document.getElementById('vazgecBtn').style.display = "none";
			document.getElementById('kaydetBtn').style.display = "block"; // KAYDET butonunu geri g√∂ster
            document.getElementById('isimInput').value = "";
            document.getElementById('soyadInput').value = "";
            document.getElementById('telefonInput').value = "";
            currentEditKey = null;
			// Ba≈üarƒ± uyarƒ±sƒ±
        Swal.fire({
            icon: 'success',
            title: 'G√ºncellendi!',
            confirmButtonText: 'Tamam'
        });
    }).catch((error) => {
        // Hata durumunda uyarƒ±
        Swal.fire({
            icon: 'error',
            title: 'Hata!',
            confirmButtonText: 'Tamam'
        });
        console.error(error);
        });
    }
	
	//g√ºncelleme esnasƒ±nda vazge√ß butonu dinleme
document.getElementById('vazgecBtn').addEventListener('click', () => {
    // Formu temizle
    document.getElementById('isimInput').value = "";
    document.getElementById('soyadInput').value = "";
    document.getElementById('telefonInput').value = "";

    // Butonlarƒ± ayarla
    document.getElementById('guncelleBtn').style.display = "none";
    document.getElementById('vazgecBtn').style.display = "none";
    document.getElementById('kaydetBtn').style.display = "inline-block";

    currentEditKey = null;
});


    // √áƒ±kƒ±≈ü Yapma Fonksiyonu
    function logout() {
        firebase.auth().signOut().then(() => {
            document.getElementById('loginSection').style.display = "block";
            document.getElementById('kayitListesi').style.display = "none";
            document.getElementById('signupSection').style.display = "none";
            document.getElementById('emailInput').value = "";
            document.getElementById('passwordInput').value = "";
        }).catch((error) => {
            console.error("√áƒ±kƒ±≈ü yapƒ±lamadƒ±: ", error);
        });
    }

    // Kayƒ±t Ekranƒ±nƒ± G√∂ster
    function showSignup() {
        document.getElementById('signupSection').style.display = "block";
        document.getElementById('loginSection').style.display = "none";
    }

    // Giri≈ü Yapma Ekranƒ±na G√∂ster
    function showLogin() {
        document.getElementById('loginSection').style.display = "block";
        document.getElementById('signupSection').style.display = "none";
    }
	
	// Arama kutusuna yazƒ±ldƒ±k√ßa filtreleme yapan fonksiyon
    document.getElementById("kelimeBul").addEventListener("input", function () {
        const arama = this.value.toLowerCase();
        const liste = document.querySelectorAll("#isimlerListesi li");

        liste.forEach(function (li) {
            const ad = li.querySelector("div span:nth-child(1)")?.textContent.toLowerCase() || "";
            const soyad = li.querySelector("div span:nth-child(2)")?.textContent.toLowerCase() || "";
            const telefon = li.querySelector("div span:nth-child(3)")?.textContent.toLowerCase() || "";

            if (ad.includes(arama) || soyad.includes(arama) || telefon.includes(arama)) {
                li.style.display = "flex"; // varsa g√∂ster
            } else {
                li.style.display = "none"; // yoksa gizle
            }
        });
    });
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	let notlar = [];

    // Not Ekle butonu a√ß
    document.getElementById("notEkleBtn").addEventListener("click", () => {
        document.getElementById("notPopup").style.display = "block";
        document.body.classList.add("popup-acik");
        document.getElementById("notMetni").focus();
    });

    // Popup kapat
    function popupKapat() {
        document.getElementById("notPopup").style.display = "none";
        document.body.classList.remove("popup-acik");
        document.getElementById("notMetni").value = "";
    }

    // Not Kaydet
    function notKaydet() {
        const metin = document.getElementById("notMetni").value.trim();
        if (metin.length === 0) return;

        notlar.push(metin); // listeye ekle
        listeyiGuncelle();
        popupKapat();
    }

    // Listeyi G√ºncelle (sadece ilk 8 karakteri g√∂ster)
    function listeyiGuncelle() {
        const ul = document.getElementById("notlarListesi");
        ul.innerHTML = "";

        notlar.forEach((not, index) => {
            const li = document.createElement("li");
            const kisalt = not.length > 8 ? not.substring(0, 8) + "..." : not;

            li.innerHTML = `
                <span>${kisalt}</span>
                <button onclick="notDuzenle(${index})">D√ºzenle</button>
            `;
            ul.appendChild(li);
        });
    }

    // Not d√ºzenleme
    function notDuzenle(index) {
        document.getElementById("notMetni").value = notlar[index];
        document.getElementById("notPopup").style.display = "block";
        document.body.classList.add("popup-acik");

        document.querySelector("#notPopup button[onclick='notKaydet()']").onclick = () => {
            notlar[index] = document.getElementById("notMetni").value.trim();
            listeyiGuncelle();
            popupKapat();
        };	
    }



  document.addEventListener("DOMContentLoaded", function () {
    const kelimeInput = document.getElementById('kelimeBul');
    const temizleBtn = document.querySelector('.temizleBtn');

    kelimeInput.addEventListener('input', function () {
      if (this.value.trim() !== "") {
        temizleBtn.style.display = "block";
      } else {
        temizleBtn.style.display = "none";
      }
    });

    window.temizleInput = function () {
      kelimeInput.value = "";
      temizleBtn.style.display = "none";
      kelimeInput.focus();
	  // üîΩ Arama filtrelemeyi tetiklemek i√ßin input event'i tetikleniyor
  kelimeInput.dispatchEvent(new Event('input'));
    };
    });
	
	// Not Kaydet
function notKaydet() {
    const metin = document.getElementById("notMetni").value.trim();
    const user = firebase.auth().currentUser;

    if (!user) {
        Swal.fire({
            text: 'L√ºtfen √∂nce giri≈ü yapƒ±n!',
            confirmButtonText: 'Tamam'
        });
        return;
    }

    if (metin.length === 0) return;

    firebase.database().ref('notlar/' + user.uid).push({
        metin: metin,
        tarih: new Date().toISOString()
    }).then(() => {
        popupKapat();
        notlariListele(); // Listeyi g√ºncelle
    }).catch((error) => {
        console.error("Not kaydedilemedi:", error);
    });
}


</script>

   </body>
</html>
